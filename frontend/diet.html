<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>√âtrend kezel≈ë ‚Äì ATHLION</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="base.css" />
  <link rel="stylesheet" href="layout.css" />
  <link rel="icon" type="image/png" href="favicon.png">
</head>
<body>
  <header class="topbar glass">
    <div class="brand">
      <a href="dashboard.html" style="display:flex;align-items:center;gap:12px;text-decoration:none;color:inherit">
        <img src="athlion_logo.png" alt="ATHLION log√≥" />
        <div class="title">ATH<span>LION</span></div>
      </a>
    </div>

    <div class="nav-main-links">
        <a href="diet.html" class="ghost active" id="navDiet">√âtrend</a>
        <a href="dashboard.html" class="ghost ghost-icon" id="navHome" title="Kezd≈ëlap">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" class="nav-icon">
            <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
          </svg>
        </a>
        <a href="workout.html" class="ghost" id="navWorkout">Edz√©sterv</a>
    </div>

    <div class="nav-auth-group" style="position: relative;">
    
    <button id="profileDropdownBtn" class="ghost" style="display:flex; align-items:center; gap:8px; padding-right:15px;">
        <span id="navProfileName">Fi√≥k</span>
        <span style="font-size: 0.8em; opacity: 0.7;">‚ñº</span>
    </button>

    <div id="profileMenu" class="dropdown-menu">
        <div class="dropdown-header">
          <span style="font-size:12px; color:var(--muted); text-transform:uppercase; letter-spacing:1px;">Fi√≥k</span>
        </div>
          <a href="profile.html" class="dropdown-item">
            Profil szerkeszt√©se
          </a>
        <div style="height:1px; background:var(--glass-stroke); margin:4px 0;"></div>
          <a href="#" id="navLogout" class="dropdown-item" style="color: var(--err);">
            Kijelentkez√©s
          </a>
        </div>
  </header>
  
  <main class="page">
    <section class="panel" id="diet">
      

      <div class="panel-inner" id="diet-panel-top">
        
        <section class="card glass" id="dayNavigatorCard">
          
          <h3 style="margin-top:0; text-align: center;">Nap</h3>
          <div class="day-nav-control">
            <button class="ghost ghost-icon" id="dayPrev" title="El≈ëz≈ë nap">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" style="width: 20px; height: 20px;"><path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5L8.25 12l7.5-7.5" /></svg>
            </button>
            <div class="day-nav-label" id="dayLabel">Mai nap</div>
            <button class="ghost ghost-icon" id="dayNext" title="K√∂vetkez≈ë nap">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" style="width: 20px; height: 20px;"><path stroke-linecap="round" stroke-linejoin="round" d="M8.25 4.5l7.5 7.5-7.5 7.5" /></svg>
            </button>
          </div>
          <button class="ghost" id="dayToday" style="width: 100%; margin-top: 10px;">Ugr√°s a mai napra</button>

          <hr style="margin: 20px 0; border: 0; border-top: 1px solid rgba(255,255,255,0.1);">

          <h3 style="margin-top:0; text-align: center;">S√∫ly (kg)</h3>
          
          <div class="weight-control-row" style="display: flex; align-items: center; justify-content: center; gap: 10px;">
            <button class="ghost ghost-icon" id="weightDec" title="-0.5 kg">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" style="width: 20px; height: 20px;"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" /></svg>
            </button>
            
            <div style="position: relative; width: 80px;">
                <input type="number" id="weightInput" value="0" step="0.1" style="width: 100%; text-align: center; font-weight: bold; padding: 8px; border-radius: 8px; border: 1px solid rgba(255,255,255,0.2); background: rgba(0,0,0,0.2); color: white;">
            </div>

            <button class="ghost ghost-icon" id="weightInc" title="+0.5 kg">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" style="width: 20px; height: 20px;"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" /></svg>
            </button>
          </div>

          <div id="weightSaveStatus" style="text-align: center; height: 20px; margin-top: 5px; font-size: 12px; color: var(--gold-1); opacity: 0; transition: opacity 0.3s;">
              Mentve! ‚úì
          </div>

          <hr style="margin: 20px 0; border: 0; border-top: 1px solid rgba(255,255,255,0.1);">

          <h3 style="margin-top:0; text-align: center;">V√≠z (ml)</h3>

          <div class="weight-control-row" style="display: flex; align-items: center; justify-content: center; gap: 10px;">
            <button class="ghost ghost-icon" id="waterDec" title="-2.5 dl">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" style="width: 20px; height: 20px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15" />
              </svg>
            </button>
            
            <div style="position: relative; width: 80px; text-align: center;">
                <span id="waterValueDisplay" style="font-weight: 800; font-size: 1.2em; color: #00BFFF;">0</span>
            </div>

            <button class="ghost ghost-icon" id="waterInc" title="+2.5 dl">
              <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="3" stroke="currentColor" style="width: 20px; height: 20px;">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
              </svg>
            </button>
          </div>

          <div style="width: 80%; margin: 10px auto 0 auto; height: 4px; background: rgba(255,255,255,0.1); border-radius: 2px; overflow: hidden;">
              <div id="waterProgressBarSmall" style="width: 0%; height: 100%; background: #00BFFF; transition: width 0.3s;"></div>
          </div>

        </section>

        <section class="card glass" id="macroChartCard">
            <h3 id="macroTitle" style="text-align:center; margin-top:0;">Makr√≥ c√©lok</h3>
            
            <div class="main-calorie-tracker">
              <div class="calorie-circle-static" id="calorieCircle">
                <span id="remainingKcalValue">0</span>
                <span class="label">H√ÅTRAL√âV≈ê KCAL</span>
              </div>
            </div>

            <div class="macro-circles">
              <div class="macro-circle-item">
                <div class="macro-circle-progress" id="proteinCircle" style="--progress-percent: 100%; --macro-color: var(--gold-1);">
                  <span id="proteinValue">0</span>
                  <span class="unit">g</span>
                </div>
                <span class="macro-label">Feh√©rje</span>
              </div>

              <div class="macro-circle-item">
                <div class="macro-circle-progress" id="carbsCircle" style="--progress-percent: 100%; --macro-color: var(--gold-2);">
                  <span id="carbsValue">0</span>
                  <span class="unit">g</span>
                </div>
                <span class="macro-label">Sz√©nhidr√°t</span>
              </div>

              <div class="macro-circle-item">
                <div class="macro-circle-progress" id="fatCircle" style="--progress-percent: 100%; --macro-color: #d1a10d;">
                  <span id="fatValue">0</span>
                  <span class="unit">g</span>
                </div>
                <span class="macro-label">Zs√≠r</span>
              </div>
            </div>
            
            <p id="macroMsg" style="text-align:center; min-height: 1.2em;"></p>
        </section>
        <section class="card glass" id="mealSelectorCard">
          <h3 style="margin-top:0; text-align: center;">Mit ett√©l ma?</h3>
          
          <div class="meal-tabs" id="mealTabs">
            <button class="meal-tab" data-meal="breakfast">Reggeli</button>
            <button class="meal-tab" data-meal="lunch">Eb√©d</button>
            <button class="meal-tab" data-meal="dinner">Vacsora</button>
            <button class="meal-tab" data-meal="snacks">Nasi</button>
          </div>

          <hr style="border: 0; border-top: 1px solid rgba(255,255,255,0.1); margin: 20px 0;">

          <div style="text-align: center;">
             <p class="muted small" style="margin-bottom: 10px;">Nincs √∂tleted? K√©rj seg√≠ts√©get!</p>
             <button class="btn" id="btnOpenAiModal" style="background: linear-gradient(135deg, var(--gold-1), var(--gold-2)); color: #000; font-weight: 800; width: 100%;">
                ü§ñ AI √âtel Aj√°nl√≥
             </button>
          </div>
        </section>
      </div>

      <div class="panel-inner" id="diet-panel-bottom">
        <section class="card glass" id="dailyFoodListCard">
          <h3 style="margin-top:0;">Mai fogyaszt√°s</h3>
          <div class="daily-food-list" id="dailyFoodList">
            <p class="muted" id="emptyListMsg">M√©g nem adt√°l hozz√° √©telt a mai naphoz.</p>
          </div>
        </section>
      </div>
    </section>
  </main>

  <div class="modal-overlay" id="foodSearchModal" style="display: none;">
    <div class="modal-content glass modal-wide">
      
      <div class="modal-header-row">
        <h3 id="modalTitle" style="margin: 0;">√âtel keres√©se</h3>
        <button class="modal-close-btn" id="modalCloseBtn" title="Bez√°r√°s">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" style="width: 24px; height: 24px;"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
      </div>

      <div class="modal-split-layout">
        <div class="modal-left-col">
          <div class="search-row">
            <input id="modalFoodQuery" type="text" placeholder="√çrd be az √©tel nev√©t..." autocomplete="off" />
          </div>
          <div class="results" id="modalFoodResults">
            <p class="muted small" style="padding: 10px 0;">√çrj be legal√°bb 3 karaktert.</p>
          </div>
        </div>

        <div class="modal-right-col glass-panel">
          <div id="foodSelectionPlaceholder" style="text-align: center; padding: 20px; color: var(--muted);">
            <p>V√°lassz egy √©telt a bal oldali list√°b√≥l!</p>
          </div>

          <div id="foodSelectionDetails" style="display: none;">
            <h4 id="selFoodName" style="margin: 0 0 5px 0; color: var(--gold-1);">√âtel neve</h4>
            <div class="base-info muted small" style="margin-bottom: 15px;">100g tartalmaz: <span id="selBaseMacros"></span></div>

            <label for="selQuantity" class="small muted">Mennyis√©g (gramm)</label>
            <div style="display: flex; gap: 10px; margin-bottom: 15px;">
              <input type="number" id="selQuantity" placeholder="100" value="100" style="font-weight: bold;" />
            </div>

            <div class="preview-macros">
              <div class="pm-item"><span class="pm-val" id="prevKcal">0</span><span class="pm-label">KCAL</span></div>
              <div class="pm-item"><span class="pm-val" id="prevP">0</span><span class="pm-label">Feh√©rje</span></div>
              <div class="pm-item"><span class="pm-val" id="prevC">0</span><span class="pm-label">Sz√©nhidr√°t</span></div>
              <div class="pm-item"><span class="pm-val" id="prevF">0</span><span class="pm-label">Zs√≠r</span></div>
            </div>

            <button class="btn" id="btnAddSelection" style="margin-top: auto;">Hozz√°ad√°s a napl√≥hoz</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="confirmModal" style="display: none; z-index: 200;">
    <div class="modal-content glass" style="max-width: 360px; text-align: center; padding: 30px;">
      <h3 style="margin-top: 0; margin-bottom: 15px;">Biztosan t√∂rl√∂d?</h3>
      <p class="muted" style="margin-bottom: 25px; font-size: 14px;">Ezt a m≈±veletet nem lehet visszavonni.</p>
      
      <div style="display: flex; gap: 12px; justify-content: center;">
        <button class="btn ghost" id="confirmNo" style="margin-top: 0; flex: 1;">M√©gse</button>
        <button class="btn btn-danger" id="confirmYes" style="margin-top: 0; flex: 1;">T√∂rl√©s</button>
      </div>
    </div>
  </div>

  <div class="modal-overlay" id="aiChoiceModal" style="display: none; z-index: 1000;">
    <div class="modal-content glass" style="max-width: 800px; text-align: center; padding: 40px;">
      
      <div class="modal-header-row" style="justify-content: center; position: relative; margin-bottom: 30px;">
        <h3 style="margin: 0; font-size: 1.5em; color: var(--gold-1);">Mit szeretn√©l enni?</h3>
        <button class="modal-close-btn" id="closeAiModal" style="position: absolute; right: -10px; top: -10px;">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2.5" stroke="currentColor" style="width: 28px; height: 28px;"><path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12" /></svg>
        </button>
      </div>

      <div style="display: flex; gap: 20px; justify-content: center; flex-wrap: wrap;">
        
        <button class="btn ai-meal-btn" data-meal="breakfast" style="flex: 1; min-width: 140px; height: 130px; font-size: 1.2em; display:flex; flex-direction:column; align-items:center; justify-content:center; gap: 10px; background: linear-gradient(135deg, #FFD700, #FFA500); color: #000; border: none; box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3); transition: transform 0.2s;">
          <span style="font-size: 3em;">üç≥</span>
          <span style="font-weight: 800;">Reggeli</span>
        </button>

        <button class="btn ai-meal-btn" data-meal="lunch" style="flex: 1; min-width: 140px; height: 130px; font-size: 1.2em; display:flex; flex-direction:column; align-items:center; justify-content:center; gap: 10px; background: linear-gradient(135deg, #FF6347, #CD853F); color: #fff; border: none; box-shadow: 0 4px 15px rgba(255, 99, 71, 0.3); transition: transform 0.2s;">
          <span style="font-size: 3em;">üçó</span>
          <span style="font-weight: 800;">Eb√©d</span>
        </button>

        <button class="btn ai-meal-btn" data-meal="dinner" style="flex: 1; min-width: 140px; height: 130px; font-size: 1.2em; display:flex; flex-direction:column; align-items:center; justify-content:center; gap: 10px; background: linear-gradient(135deg, #32CD32, #20B2AA); color: #fff; border: none; box-shadow: 0 4px 15px rgba(50, 205, 50, 0.3); transition: transform 0.2s;">
          <span style="font-size: 3em;">ü•ó</span>
          <span style="font-weight: 800;">Vacsora</span>
        </button>

        <button class="btn ai-meal-btn" data-meal="snacks" style="flex: 1; min-width: 140px; height: 130px; font-size: 1.2em; display:flex; flex-direction:column; align-items:center; justify-content:center; gap: 10px; background: linear-gradient(135deg, #FF69B4, #9370DB); color: #fff; border: none; box-shadow: 0 4px 15px rgba(255, 105, 180, 0.3); transition: transform 0.2s;">
          <span style="font-size: 3em;">üçé</span>
          <span style="font-weight: 800;">Nasi</span>
        </button>

      </div>
      <p class="muted small" style="margin-top: 30px; opacity: 0.7;">V√°lassz egy kateg√≥ri√°t, √©s az AI √∂ssze√°ll√≠t egy fog√°st a c√©ljaidhoz.</p>

    </div>
  </div>
  

  <script src="script.js"></script>
  <script src="diet.js"></script>
</body>
</html>